{% comment %}
  CTB FAQ Section - Accordion style with toggle animations
{% endcomment %}

<style>
  .ctb-faq {
    background: {{ section.settings.background_color }};
    color: {{ section.settings.text_color }};
    padding: {{ section.settings.padding_top }}px 0px {{ section.settings.padding_bottom }}px 0px;
  }
  
  .ctb-faq .page-width {
    max-width: 1440px;
    margin: 0 auto;
  }

  .ctb-faq .section-title {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 700;
    text-align: center;
    margin-bottom: 3rem;
    color: {{ section.settings.heading_color }};
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .faq-item {
    margin-bottom: 12px;
    opacity: 0;
    animation: fadeInUp 0.5s ease forwards;
  }
  
  .faq-item:nth-child(1) { animation-delay: 0.1s; }
  .faq-item:nth-child(2) { animation-delay: 0.2s; }
  .faq-item:nth-child(3) { animation-delay: 0.3s; }
  .faq-item:nth-child(4) { animation-delay: 0.4s; }
  .faq-item:nth-child(5) { animation-delay: 0.5s; }
  .faq-item:nth-child(6) { animation-delay: 0.6s; }
  .faq-item:nth-child(7) { animation-delay: 0.7s; }
  .faq-item:nth-child(8) { animation-delay: 0.8s; }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .faq-question {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 16px;
    background: transparent;
    border: {{ section.settings.border_style }};
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s, border-color 0.3s;
  }
  
  .faq-question:hover {
    background: {{ section.settings.question_hover_bg }};
  }
  
  .faq-question-text {
    font-size: 18px;
    font-weight: 600;
    color: {{ section.settings.text_color }};
    text-align: left;
  }

  .faq-icon {
    position: relative;
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }
  
  .faq-icon-horizontal,
  .faq-icon-vertical {
    position: absolute;
    top: 50%;
    left: 50%;
    background: {{ section.settings.icon_color }};
    transform-origin: center center;
  }
  
  .faq-icon-horizontal {
    width: 100%;
    height: 2px;
    transform: translate(-50%, -50%);
  }
  
  .faq-icon-vertical {
    width: 2px;
    height: 100%;
    transform: translate(-50%, -50%);
  }

  .faq-item.open .faq-icon {
    transform: rotate(45deg);
  }
  
  .faq-item.open .faq-icon-horizontal,
  .faq-item.open .faq-icon-vertical {
    background: {{ section.settings.icon_color }};
  }

  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }
  
  .faq-item.open .faq-answer {
    max-height: 1500px;
  }
  
  .faq-answer-content {
    padding: 8px 20px 20px;
    margin: 0;
    font-size: 16px;
    line-height: 1.6;
    color: {{ section.settings.text_color }};
  }

  @media (max-width: 768px) {
    .faq-question {
      padding: 12px;
      font-size: 16px;
    }
    .faq-question-text {
      font-size: 16px;
    }
    .faq-answer-content {
      font-size: 14px;
      padding: 8px 16px 16px;
    }
  }
</style>

<section class="ctb-faq">
  <div class="page-width">
    <h2 class="section-title">{{ section.settings.heading }}</h2>

    <div class="faq-accordion">
      {% for block in section.blocks %}
        <div class="faq-item">
          <button class="faq-question" type="button">
            <div class="faq-question-text">{{ block.settings.question }}</div>
            <div class="faq-icon">
              <div class="faq-icon-horizontal"></div>
              <div class="faq-icon-vertical"></div>
            </div>
          </button>
          <div class="faq-answer">
            <div class="faq-answer-content rte">
              {{ block.settings.answer }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.ctb-faq .faq-question').forEach(function(btn) {
      btn.addEventListener('click', function() {
        var item = btn.parentElement;
        
        if (item.classList.contains('open')) {
          item.classList.remove('open');
        } else {
          item.classList.add('open');
        }
      });
    });
  });
</script>

{% schema %}
{
  "name": "CTB FAQ",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon Color",
      "default": "#0f9d58"
    },
    {
      "type": "text",
      "id": "border_style",
      "label": "Border Style",
      "default": "1px solid #0f9d58"
    },
    {
      "type": "color_background",
      "id": "question_hover_bg",
      "label": "Question Hover Background",
      "default": "rgba(15, 157, 88, 0.1)"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding Top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "faq",
      "name": "Question & Answer",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "How long does a typical custom build take?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>Build timelines vary based on project complexity. Most custom builds range from 3-8 months, while performance upgrades can take 2-6 weeks. We provide detailed timelines during consultation and keep you updated throughout the process.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "CTB FAQ",
      "category": "Custom",
      "blocks": [
        {
          "type": "faq",
          "settings": {
            "question": "How long does a typical custom build take?",
            "answer": "<p>Build timelines vary based on project complexity. Most custom builds range from 3-8 months, while performance upgrades can take 2-6 weeks. We provide detailed timelines during consultation and keep you updated throughout the process.</p>"
          }
        },
        {
          "type": "faq",
          "settings": {
            "question": "Do you work on all makes and models?",
            "answer": "<p>We specialize in muscle cars, classic vehicles, and high-performance imports. While we focus on these categories, we evaluate each project individually. Contact us with your vehicle details and we'll let you know if we're the right fit.</p>"
          }
        },
        {
          "type": "faq",
          "settings": {
            "question": "Can I supply my own parts or do you source everything?",
            "answer": "<p>Both options work! You're welcome to source your own parts, though we'll inspect them for quality and compatibility. We also have relationships with premium suppliers and can source performance parts at competitive prices with warranties included.</p>"
          }
        },
        {
          "type": "faq",
          "settings": {
            "question": "What's your deposit and payment structure?",
            "answer": "<p>We require a 30% deposit to begin work, with progress payments at key milestones (frame-off, assembly, final). We accept cash, check, wire transfer, and major credit cards. Detailed payment schedules are provided in your project contract.</p>"
          }
        },
        {
          "type": "faq",
          "settings": {
            "question": "Do you offer warranties on your work?",
            "answer": "<p>Absolutely. All our labor comes with a 12-month/12,000-mile warranty. Parts warranties vary by manufacturer—OEM parts typically carry 1-3 year warranties, while aftermarket performance parts follow their manufacturer's terms.</p>"
          }
        },
        {
          "type": "faq",
          "settings": {
            "question": "Can I visit and check on my build during the process?",
            "answer": "<p>Yes! We encourage scheduled visits so you can see the progress firsthand. We also send weekly photo/video updates and are available by phone or text for questions. Your project manager keeps you in the loop every step of the way.</p>"
          }
        },
        {
          "type": "faq",
          "settings": {
            "question": "What happens if you find additional issues during the build?",
            "answer": "<p>We conduct thorough pre-build inspections, but sometimes hidden issues surface. If we discover anything unexpected, we immediately contact you with photos, explanation, and cost estimate before proceeding. No surprise charges—ever.</p>"
          }
        },
        {
          "type": "faq",
          "settings": {
            "question": "Do you offer financing for custom builds?",
            "answer": "<p>We've partnered with specialty automotive lenders who understand custom builds. Financing options are available for qualified buyers with competitive rates. Contact us for details and we'll connect you with our lending partners.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
